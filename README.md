# PX4-USVSim-HIL-Simulator
Pixhawk作为一款被广泛使用的自驾仪，具有成熟的自动驾驶软件系统px4，基于px4又衍生出了许多配套功能，如使用jmav、Gazebo、xplane等仿真器的硬件或软件在环仿真。为便于开发控制系统，Matlab的Pilot Engineering Group又开发出了Pixhawk的Simulink支持包Pixhawk Pilot Support Package (PSP)。由于px4采用Mavlink协议通信，为方便使用基于ROS的资源，开发者还提供了Mavlink与ROS通信的协议转换软件mavros。总之，px4系统具有很好的自动控制效果，开发配套软件齐全，是理想的自驾仪软件系统。但是，大部分配套功能都是面向无人机的，例如Gazebo中的模型只有四旋翼、固定翼等无人机模型。使用px4进行无人艇的开发，需要支持无人艇水动力特性及环境影响（风、浪、流）的仿真器。 usvsim是一款开源的、能够提供现实环境干扰的水上航行器模拟器，旨在为USV的控制研究提供标准的仿真环境，usvsim以Gazebo为主要仿真引擎，UWSim提供视觉，并采用了Free-floating、usv_foil_dynamics等插件生成风、浪、流。usvsim以ROS系统为架构，各种功能的插件以package的形式集成在stack中，通过rostopic相互通信，并通过Gazebo接口作用于仿真模型。 在mavros软件的帮助下，px4可以实现与ROS系统的通信，而usvsim采用的也刚好是ROS系统，所以可以把ROS作为控制系统与仿真系统的接口，实现联合仿真。 本仿真平台通过对usvsim、px4、mavros进行二次开发，实现了以Pixhawk为硬件控制器，px4为自驾仪软件系统，usvsim为模拟器器的无人艇硬件在环仿真，同时实现了使用Matlab Simulink直接对px4控制系统进行开发。
